---
slug: component
title: 组件
tags: [angular, 组件]
---

## 环境搭建

### 安装 Angular CLI

```bash
npm install -g @angular/cli
```

### 创建工作空间和初始应用

```bash
ng new my-app
```

`my-app`就是我们的项目名称

`ng new` 命令会提示你提供要把哪些特性包含在初始应用中

**Angular CLI 会安装必要的 Angular npm 包和其它依赖包。**

### 运行应用

```bash
cd my-app
ng serve --open
```

`ng serve` 命令会启动开发服务器、监视文件，并在这些文件发生更改时重建应用。

`--open`（或者只用 `-o` 缩写）选项会自动打开你的浏览器，并访问 `http://localhost:4200/`。

## 概述

一个 Angular 的组件包含以下几部分：

- 一个 HTML 模版文件

- 一个 TS 组件类

- 一个样式文件

## 创建组件

### 使用 CLI 命令创建组件

```bash
ng generate component comp-name
```

comp-name 是组件名称

默认情况下会创建下面几个文件：

- comp-name.component.html

- comp-name.component.ts

- comp-name.component.css

- comp-name.component.spec.ts

### 手动创建

以组件名为文件夹名称，然后创建上面的三个文件，测试文件可选

对于组件的 ts 文件：

```typescript
import { Component } from "@angular/core";
@Component({
  // 组件名称 css选择器 标签名称
  selector: "app-edit-zdt-pen-modal",
  // 模版文件使用templateUrl属性
  // 模版字符串使用template属性
  templateUrl: "./edit-zdt-pen-modal.component.html",
  //   template: '<h1>Hello World!</h1>',
  styleUrls: ["./edit-zdt-pen-modal.component.scss"]
  //   styles: ['h1 { font-weight: normal; }']
})
export class EditZdtPenModalComponent {}
```

## 生命周期

当 Angular 实例化组件类并渲染组件视图及其子视图时，组件实例的生命周期就开始了。

生命周期一直伴随着变更检测，Angular 会检查数据绑定属性何时发生变化，并按需更新视图和组件实例。

当组件销毁的时候，生命周期就结束了

### 生命周期事件

可以通过实现一个或多个 Angular core 库中定义的生命周期钩子接口来响应组件或指令生命周期中的事件。

每个接口都有唯一的一个钩子方法，它们的名字是由接口名再加上 ng 前缀构成的。比如，OnInit 接口的钩子方法叫做 ngOnInit()。

不需要实现所有的生命周期，只需要实现你需要的生命周期即可。

#### angular 的生命周期即生命周期的调用顺序

| 钩子方法      | 用途                                                                                  | 时机                                                                                                                                                                                                       |
| ------------- | ------------------------------------------------------------------------------------- | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| ngOnChanges() | 一旦检测到该组件或指令的输入属性发生了变化，Angular 就会调用它的 ngOnChanges() 方法。 | 如果组件绑定过输入属性，那么在 ngOnInit() 之前以及所绑定的一个或多个输入属性的值发生变化时都会调用。注意，如果你的组件没有输入属性，或者你使用它时没有提供任何输入属性，那么框架就不会调用 ngOnChanges()。 |
