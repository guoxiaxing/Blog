<!doctype html>
<html class="docs-version-current" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.9">
<link rel="alternate" type="application/rss+xml" href="/Blog/blog/rss.xml" title="Try&#39;s Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/Blog/blog/atom.xml" title="Try&#39;s Blog Atom Feed"><title data-react-helmet="true">Angular ChangeDetection | Try&#x27;s Blog</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:url" content="https://guoxiaxing.github.io/Blog/docs/æ¡†æ¶&amp;å¸¸ç”¨åº“/Angular/angular-ChangeDetection"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Angular ChangeDetection | Try&#x27;s Blog"><meta data-react-helmet="true" name="description" content="ChangeDetection æ˜¯ä»€ä¹ˆ"><meta data-react-helmet="true" property="og:description" content="ChangeDetection æ˜¯ä»€ä¹ˆ"><link data-react-helmet="true" rel="shortcut icon" href="/Blog/img/logo.png"><link data-react-helmet="true" rel="canonical" href="https://guoxiaxing.github.io/Blog/docs/æ¡†æ¶&amp;å¸¸ç”¨åº“/Angular/angular-ChangeDetection"><link data-react-helmet="true" rel="alternate" href="https://guoxiaxing.github.io/Blog/docs/æ¡†æ¶&amp;å¸¸ç”¨åº“/Angular/angular-ChangeDetection" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://guoxiaxing.github.io/Blog/docs/æ¡†æ¶&amp;å¸¸ç”¨åº“/Angular/angular-ChangeDetection" hreflang="x-default"><link rel="stylesheet" href="/Blog/assets/css/styles.45cef737.css">
<link rel="preload" href="/Blog/assets/js/runtime~main.1db7cb56.js" as="script">
<link rel="preload" href="/Blog/assets/js/main.c97de10f.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_OuoZ">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/Blog/"><div class="navbar__logo"><img src="/Blog/img/logo.png" alt="Try&#x27;s Blog" class="themedImage_TMUO themedImage--light_4Vu1"><img src="/Blog/img/logo.png" alt="Try&#x27;s Blog" class="themedImage_TMUO themedImage--dark_uzRr"></div><b class="navbar__title">Try&#x27;s Blog</b></a><a class="navbar__item navbar__link navbar__link--active" href="/Blog/docs/quick-link">æŠ€æœ¯</a><a class="navbar__item navbar__link" href="/Blog/blog">ç”Ÿæ´»</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/guoxiaxing/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><div class="toggle_iYfV toggle_2i4l toggleDisabled_xj38"><div class="toggleTrack_t-f2" role="button" tabindex="-1"><div class="toggleTrackCheck_mk7D"><span class="toggleIcon_pHJ9">ğŸŒœ</span></div><div class="toggleTrackX_dm8H"><span class="toggleIcon_pHJ9">ğŸŒ</span></div><div class="toggleTrackThumb_W6To"></div></div><input type="checkbox" class="toggleScreenReader_h9qa" aria-label="Switch between dark and light mode"></div><div class="navbar__search searchBarContainer_I7kZ"><input placeholder="Search" aria-label="Search" class="navbar__search-input"><div class="loadingRing_Zg7X searchBarLoadingRing_J5Ez"><div></div><div></div><div></div><div></div></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_lDyR"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_i9tI" type="button"></button><aside class="docSidebarContainer_0YBq"><div class="sidebar_a3j0"><nav class="menu thin-scrollbar menu_cyFh"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/Blog/docs/quick-link">ç›®å½•</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">æ—¥å¸¸ç§¯ç´¯</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#">æ¡†æ¶&amp;å¸¸ç”¨åº“</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#" tabindex="0">Angular</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/Blog/docs/æ¡†æ¶&amp;å¸¸ç”¨åº“/Angular/angular-ChangeDetection">Angular ChangeDetection</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/Blog/docs/æ¡†æ¶&amp;å¸¸ç”¨åº“/Angular/angular-form-contol-disabled">formControlçš„disabledå±æ€§ç»‘å®šä¸ç”Ÿæ•ˆ</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="0">Rxjs</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="0">React</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Typescript</a></li></ul></nav><button type="button" title="Collapse sidebar" aria-label="Collapse sidebar" class="button button--secondary button--outline collapseSidebarButton_eoK2"><svg width="20" height="20" aria-hidden="true" class="collapseSidebarButtonIcon_e+kA"><g fill="#7a7a7a"><path d="M9.992 10.023c0 .2-.062.399-.172.547l-4.996 7.492a.982.982 0 01-.828.454H1c-.55 0-1-.453-1-1 0-.2.059-.403.168-.551l4.629-6.942L.168 3.078A.939.939 0 010 2.528c0-.548.45-.997 1-.997h2.996c.352 0 .649.18.828.45L9.82 9.472c.11.148.172.347.172.55zm0 0"></path><path d="M19.98 10.023c0 .2-.058.399-.168.547l-4.996 7.492a.987.987 0 01-.828.454h-3c-.547 0-.996-.453-.996-1 0-.2.059-.403.168-.551l4.625-6.942-4.625-6.945a.939.939 0 01-.168-.55 1 1 0 01.996-.997h3c.348 0 .649.18.828.45l4.996 7.492c.11.148.168.347.168.55zm0 0"></path></g></svg></button></div></aside><main class="docMainContainer_r8cw"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_zHA2"><div class="docItemContainer_oiyr"><article><div class="tocCollapsible_aw-L theme-doc-toc-mobile tocMobile_Tx6Y"><button type="button" class="clean-btn tocCollapsibleButton_zr6a">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Angular ChangeDetection</h1></header><h2 class="anchor anchorWithStickyNavbar_y2LR" id="changedetection-æ˜¯ä»€ä¹ˆ">ChangeDetection æ˜¯ä»€ä¹ˆ<a aria-hidden="true" class="hash-link" href="#changedetection-æ˜¯ä»€ä¹ˆ" title="Direct link to heading">â€‹</a></h2><p>æ•°æ®é©±åŠ¨çš„ UIï¼Œæˆ‘ä»¬æœŸæœ›çš„æ˜¯åªéœ€è¦æ”¹å˜ component é‡Œçš„æ•°æ®ï¼Œç„¶å template é‡Œçš„ UI å…ƒç´ å°±é­”æ³•èˆ¬åœ°è‡ªåŠ¨å˜æˆæœ€æ–°çš„å±•ç°äº†ã€‚ChangeDetection å°±æ˜¯ Angular å®ç°æ•°æ®é©±åŠ¨ UI çš„æ–¹å¼ã€‚</p><h2 class="anchor anchorWithStickyNavbar_y2LR" id="changedetectionstrategydefault">ChangeDetectionStrategy.Default<a aria-hidden="true" class="hash-link" href="#changedetectionstrategydefault" title="Direct link to heading">â€‹</a></h2><p>è¿™æ˜¯é»˜è®¤çš„é­”æ³•æ–¹æ¡ˆï¼Œçœå¿ƒçœäº‹å„¿ï¼Œèƒ½æŠŠäº‹æƒ…åŠå¥½ï¼Œæˆ‘ä»¬å•¥ä¹Ÿä¸ç”¨ç®¡ã€‚</p><h2 class="anchor anchorWithStickyNavbar_y2LR" id="detectchange-å®ç°">detectChange å®ç°<a aria-hidden="true" class="hash-link" href="#detectchange-å®ç°" title="Direct link to heading">â€‹</a></h2><p>ä»»ä½•æ•°æ®æ”¹å˜ï¼ŒAngular éƒ½èƒ½å‘ç°å¹¶æ›´æ–° UIã€‚è¿™æ˜¯å› ä¸º Angular ä¼šåœ¨åˆé€‚æ—¶æœºè¿è¡Œ detectChangeï¼Œå¹¶é‡æ–°è·å–ä¸€éæ•°æ®æ•°æ®ç»‘å®šçš„å€¼ï¼Œå¹¶ä¸ä¸Šä¸€æ¬¡çš„å€¼è¿›è¡Œå¯¹æ¯”ã€‚å¦‚æœä¸ä¸€æ ·çš„è¯å°±ä¼šè¿›è¡Œ UI æ”¹å˜ã€‚</p><p>Angular å¯¹ Object çš„æ£€æµ‹åªæ˜¯ç®€å•æ£€æŸ¥æ˜¯å¦æ˜¯åŒä¸€ä¸ªå®ä¾‹ï¼Œæ”¹å˜ object.count ä¸ä¼šè§¦å‘ child çš„ inObj çš„å˜åŒ–ï¼Œä½†æ˜¯ detectChange ä¹Ÿä¼š detect æ‰€æœ‰ child ç»„ä»¶çš„å˜åŒ–ã€‚äºæ˜¯ child ç»„ä»¶ä¹Ÿä¼šå†æ£€æŸ¥ä¸€éã€‚</p><p>*<!-- -->ngFor è¿™ç§ä¸œè¥¿è‡ªå·±å†…éƒ¨ä¼šåœ¨æ¯æ¬¡ detectChange çš„æ—¶å€™å¯¹æ¯” array çš„æ–°å¢ã€å‡å°‘ã€è°ƒåºã€‚</p><h2 class="anchor anchorWithStickyNavbar_y2LR" id="detectchange-æ—¶æœº">detectChange æ—¶æœº<a aria-hidden="true" class="hash-link" href="#detectchange-æ—¶æœº" title="Direct link to heading">â€‹</a></h2><p>ä½†æ˜¯ Angular æ¯”è¾ƒæœºæ™ºçš„æ˜¯ï¼Œå®ƒä¼šåœ¨ä¸€äº›äº‹ä»¶å®Œæˆçš„æ—¶å€™è‡ªåŠ¨è§¦å‘ detectChangeã€‚è¿™äº›åŒ…æ‹¬ï¼š</p><ul><li>æ‰€æœ‰æµè§ˆå™¨äº‹ä»¶ï¼ˆclickã€keyupã€mouseover ç­‰ï¼‰</li><li>æ‰€æœ‰ addEventListener çš„ callback å®Œæˆå</li><li>æ‰€æœ‰ Ajax è¯·æ±‚å</li><li>æ‰€æœ‰çš„ setTimeout å’Œ setInterval çš„å›è°ƒè§¦å‘å</li><li>ï¼ˆæµè§ˆå™¨è‡ªå¸¦çš„ï¼‰Websockets çš„å„äº‹ä»¶ï¼ˆoncloseã€onopenã€onmessage ç­‰ï¼‰</li><li>Promiseï¼ˆresolveã€reject...ï¼‰</li><li>NgZone.runã€NgZone.runTask...</li><li>...</li></ul><p>è¿™äº›äº‹æƒ…å‘ç”Ÿçš„æ—¶å€™ï¼Œéƒ½æ˜¯æœ‰æ¯”è¾ƒå¤§çš„æ¦‚ç‡ä¼šå¼•èµ· UI æ”¹å˜çš„ã€‚æ¯”å¦‚ click é©±ä½¿çš„æ”¹å˜ã€æ–°ç½‘ç»œè¯·æ±‚æ•°æ®é©±ä½¿çš„æ”¹å˜ä¹‹ç±»ä¹‹ç±»ã€‚</p><p>Angular åº•å±‚çš„ ngZone é€šè¿‡ zone.js æ¥å¯¹æµè§ˆå™¨çš„ addEventListener ç­‰æ–¹æ³•åš patchï¼Œä»è€Œç›‘å¬è¿™äº›äº‹ä»¶çš„è§¦å‘æ—¶æœºè€Œè¿è¡Œ detectChange</p><p>Angular è¿™äº› detectChange çš„è°ƒç”¨éƒ½æ˜¯ä» root node è°ƒç”¨çš„ï¼Œæ‰€ä»¥ä¼šæ£€æŸ¥æ•´ä¸ªåº”ç”¨çš„ç»‘å®šå€¼</p><h2 class="anchor anchorWithStickyNavbar_y2LR" id="detectionstrategyonpush">DetectionStrategy.OnPush<a aria-hidden="true" class="hash-link" href="#detectionstrategyonpush" title="Direct link to heading">â€‹</a></h2><p>è™½ç„¶ Default çš„ç­–ç•¥å¾ˆç¾å¥½ï¼ŒAngular çš„ detectChanges çš„æ€§èƒ½ä¹Ÿä¸é”™ï¼Œä½†æ˜¯å¯¹äºå¤§ä¸€äº›çš„åº”ç”¨æ¥è¯´ï¼Œæ¯ä¸€ä¸ªäº‹ä»¶éƒ½æ£€æŸ¥æ•´ä¸ªç»„ä»¶æ ‘è¿˜æ˜¯ä¼šæœ‰æ€§èƒ½é—®é¢˜çš„ã€‚å¯ä»¥å‡å°‘ä¸å¿…è¦çš„æ£€æµ‹ä»è€Œæé«˜æ€§èƒ½</p><p>OnPush è™½ç„¶éœ€è¦æˆ‘ä»¬ä¸»åŠ¨è°ƒç”¨ markForCheckï¼Œä½†æ˜¯æœ‰ä¸‰ç§æƒ…å†µ Angular ä¼šè‡ªåŠ¨å¸®æˆ‘ä»¬è°ƒç”¨ï¼š</p><ul><li>@Input</li><li>AsyncPipe</li><li>Browser äº‹ä»¶</li></ul><p>OnPush ç›¸å…³çš„ä¸¤ä¸ªæ¥å£:</p><ul><li>markForCheck - æ ‡è®°ä¸º dirtyã€‚ä¸‹æ¬¡æœ‰ detectChange çš„æ—¶å€™æ›´æ–° UI</li><li>detectChange - ç«‹å³å¯¹å½“å‰ç»„ä»¶è¿›è¡Œ detectChangeï¼Œå³ä½¿ç»„ä»¶è¿è¡Œåœ¨ ngZone ä¹‹å¤–ï¼ŒåŒæ­¥æ›´æ–° UI</li></ul><h3 class="anchor anchorWithStickyNavbar_y2LR" id="onpush-ä¸»è¦åŸåˆ™">OnPush ä¸»è¦åŸåˆ™<a aria-hidden="true" class="hash-link" href="#onpush-ä¸»è¦åŸåˆ™" title="Direct link to heading">â€‹</a></h3><p>å…¶ä¸»è¦åŸåˆ™å°±æ˜¯æ²¡æœ‰è¢«æ ‡è®° markForCheck çš„ç»„ä»¶åœ¨ changeDetection æ—¶ä¼šè¢«ç›´æ¥è·³è¿‡</p><p>ä¸¾ä¸ªä¾‹å­ï¼ŒsetTimeoutã€setIntervalã€ç½‘ç»œè¯·æ±‚ä¹‹ç±»çš„äº‹ä»¶åï¼ŒAngular ä¼šä» root å‘èµ· detectChangeï¼Œä½†æ˜¯é‡åˆ° onPush æ—¶ï¼Œå¦‚æœæ²¡æœ‰è¢« markForCheckï¼Œå°±ä¼šè·³è¿‡è¿™æ•´ä¸ªèŠ‚ç‚¹ä»¥åŠå…¶å­èŠ‚ç‚¹ï¼ˆå­èŠ‚ç‚¹æ— è®ºæ˜¯ OnPush ç­–ç•¥è¿˜æ˜¯ Default ç­–ç•¥éƒ½ä¼šè¢«è·³è¿‡ï¼‰</p><p>æ‰€ä»¥ï¼Œå½“æˆ‘ä»¬çŸ¥é“éœ€è¦æ›´æ–° UI çš„æ—¶å€™ï¼Œæˆ‘ä»¬éœ€è¦æ›´æ–° UI æ—¶ï¼Œéœ€è¦è°ƒç”¨ markForCheck()</p><p>ç»è¿‡ markForCheck æ ‡è®°åçš„ OnPush ç»„ä»¶ï¼Œä¼šæŠŠè‡ªå·±æ‰€æœ‰ OnPush çš„çˆ¶ç»„ä»¶éƒ½æ ‡è®°ä¸º dirtyï¼Œä¸‹æ¬¡æ‰§è¡Œ detectChange çš„æ—¶å€™å°±ä¼šæŠŠéœ€è¦æ£€æŸ¥çš„éƒ½æå®šã€‚
ç¨å¾®æœ‰å‡ ä¸ªç»†èŠ‚ï¼š</p><ul><li>è‡ªå·±çš„å­ç»„ä»¶å¦‚æœæ˜¯ Default çš„è¯ï¼Œä¼šåœ¨è‡ªå·±è¿è¡Œ detectChange çš„æ—¶å€™ä¹Ÿæ£€æŸ¥ä¸€é</li><li>å¦‚æœè‡ªå·±çš„å­ç»„ä»¶æ˜¯ OnPush å¹¶ä¸”å­ç»„ä»¶è‡ªå·±æ²¡æœ‰ markForCheckï¼Œé‚£ä¹ˆ detectChange å°±ä¼šè¢«è·³è¿‡</li><li>å¦‚æœ OnPush æ²¡æœ‰è¢« markForCheckï¼Œé‚£ä¹ˆå³ä½¿è‡ªå·±çš„å­ç»„ä»¶æ˜¯ Defaultï¼Œä¹Ÿä¸ä¼šè¢«æ£€æŸ¥</li></ul><p>åœ¨ä¸€äº›æƒ…å†µä¸‹ Angular ä¼šè‡ªåŠ¨ç»™æˆ‘ä»¬çš„ OnPush ç»„ä»¶æ ‡è®° markForCheckã€‚</p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="input-å±æ€§å‘ç”Ÿæ”¹å˜çš„æ—¶å€™">@Input å±æ€§å‘ç”Ÿæ”¹å˜çš„æ—¶å€™<a aria-hidden="true" class="hash-link" href="#input-å±æ€§å‘ç”Ÿæ”¹å˜çš„æ—¶å€™" title="Direct link to heading">â€‹</a></h3><p>å½“ç»™å­ç»„ä»¶ç»‘å®šçš„@Input å€¼å‘ç”Ÿæ”¹å˜çš„æ—¶å€™ï¼ŒAngular ä¼šè‡ªåŠ¨ç»™å­ç»„ä»¶æ ‡è®° markForCheckï¼Œå¹¶åœ¨ detectChange çš„æ—¶å€™æ›´æ–° UIï¼Œä¸éœ€è¦æˆ‘ä»¬æ‰‹åŠ¨è°ƒç”¨ markForCheckã€‚</p><p>ä½†æ˜¯éœ€è¦æ³¨æ„å‡ ä¸ªç»†èŠ‚ï¼š</p><h4 class="anchor anchorWithStickyNavbar_y2LR" id="ä¸ä¼šè¿›è¡Œæ·±åº¦æ£€æŸ¥">ä¸ä¼šè¿›è¡Œæ·±åº¦æ£€æŸ¥<a aria-hidden="true" class="hash-link" href="#ä¸ä¼šè¿›è¡Œæ·±åº¦æ£€æŸ¥" title="Direct link to heading">â€‹</a></h4><p>ä¸Šé¢æåˆ°è¿‡ï¼ŒAngular çš„ changeDetection å¯¹ Object åªæ£€æŸ¥æ˜¯ä¸æ˜¯åŒä¸€ä¸ªå¯¹è±¡ï¼Œä¸ä¼šè¿›è¡Œæ·±åº¦æ£€æŸ¥ã€‚æ‰€æœ‰æ”¹å˜ä»»ä½• Object å†…åµŒçš„å€¼ï¼Œæˆ–è€…ç»™ array.push ä¹‹ç±»çš„æ“ä½œï¼Œéƒ½ä¸ä¼šè‡ªåŠ¨è§¦å‘ markForCheckã€‚</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI html"><pre tabindex="0" class="prism-code language-html codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">app-child</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">[inCount]</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">count</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">[inObj]</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">obj</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">[inArr]</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">array</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">app-child</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI typescript"><pre tabindex="0" class="prism-code language-typescript codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> count</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">number</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> obj</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> count</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">number</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> other</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">number</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> count</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> other</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">4</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> array</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">number</span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// will trigger mark</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">count</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">obj</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token spread operator" style="color:#393A34">...</span><span class="token plain">obj</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> count</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">array</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">array</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token spread operator" style="color:#393A34">...</span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">array</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">array</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">array</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">slice</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// will not trigger mark</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">obj</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">count</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">6</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">array</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">push</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">array</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">length</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h4 class="anchor anchorWithStickyNavbar_y2LR" id="çˆ¶ç»„ä»¶æ˜¯-onpush">çˆ¶ç»„ä»¶æ˜¯ OnPush<a aria-hidden="true" class="hash-link" href="#çˆ¶ç»„ä»¶æ˜¯-onpush" title="Direct link to heading">â€‹</a></h4><p>æ£€æŸ¥ä¸Šè¿°@Input ç»‘å®šå€¼æ˜¯å¦å˜åŒ–çš„é€»è¾‘ä¸åœ¨å­ç»„ä»¶é‡Œï¼Œè€Œæ˜¯åœ¨çˆ¶ç»„ä»¶ detectChange æ—¶åˆ¤å®šçš„ã€‚ ä¹Ÿå°±æ˜¯è¯´ï¼Œåªè¦çˆ¶ç»„ä»¶æ²¡æœ‰è§¦å‘ detectChangeï¼Œå­ç»„ä»¶æ—¢ä¸ä¼š markForCheckï¼Œä¹Ÿä¸ä¼šæ”¹å˜@Input çš„å€¼ã€‚è™½ç„¶ Angular ä¼šç›‘å¬å¾ˆå¤šç›¸å…³æ–¹æ³•ï¼Œå¹¶è‡ªåŠ¨è§¦å‘ detectChangeï¼Œä½†æ˜¯è¿˜æ˜¯éœ€è¦æ³¨æ„ä¸€äº›ç‰¹æ®Šæƒ…å†µçš„ï¼š</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI html"><pre tabindex="0" class="prism-code language-html codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">app-child</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">[inCount]</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">count</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">app-child</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI typescript"><pre tabindex="0" class="prism-code language-typescript codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">@</span><span class="token function maybe-class-name" style="color:#d73a49">Component</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  changeDetection</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token maybe-class-name">ChangeDetectionStrategy</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access maybe-class-name">OnPush</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">export</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">class</span><span class="token plain"> </span><span class="token class-name maybe-class-name">ParentComponent</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">implements</span><span class="token plain"> </span><span class="token class-name maybe-class-name">OnInit</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> count</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">number</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#d73a49">ngOnInit</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">interval</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">1000</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">subscribe</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">count</span><span class="token operator" style="color:#393A34">++</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// will not trigger cd for child</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>å› ä¸ºæ£€æŸ¥@Input ç»‘å®šå€¼çš„å˜åŒ–æ˜¯åœ¨çˆ¶ç»„ä»¶é‡Œåšçš„ï¼Œæ‰€ä»¥å¦‚æœçˆ¶ç»„ä»¶æ˜¯ OnPush å¹¶ä¸”æ²¡æœ‰æ ‡è®° markForCheckï¼Œé‚£ä¹ˆå­ç»„ä»¶ä¹Ÿä¸ä¼šè§¦å‘ cdã€‚</p><p>è¿™é‡Œè™½ç„¶æ¯æ¬¡è§¦å‘ interval åéƒ½ä¼šæœ‰ detectChange å‘ç”Ÿï¼Œä½†æ˜¯å› ä¸ºçˆ¶ç»„ä»¶æ˜¯ OnPush å¹¶ä¸”æ²¡æœ‰è¢« markForCheckï¼Œæ‰€ä»¥ä¼šç›´æ¥è·³è¿‡ã€‚</p><h4 class="anchor anchorWithStickyNavbar_y2LR" id="ngzone-ä¹‹å¤–çš„äº‹ä»¶">ngZone ä¹‹å¤–çš„äº‹ä»¶<a aria-hidden="true" class="hash-link" href="#ngzone-ä¹‹å¤–çš„äº‹ä»¶" title="Direct link to heading">â€‹</a></h4><p>Angular è‡ªåŠ¨è§¦å‘ detectChange éƒ½æ˜¯ ngZone é‡Œçš„äº‹ä»¶è§¦å‘çš„ï¼Œå¦‚æœäº‹ä»¶ä¸åœ¨ ngZone é‡Œçš„è¯ï¼Œå°±ä¸ä¼šè‡ªåŠ¨è§¦å‘ detectChangeã€‚
ä¾‹å­ï¼š</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI typescript"><pre tabindex="0" class="prism-code language-typescript codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:#393A34">{</span><span class="token imports"> </span><span class="token imports maybe-class-name">Component</span><span class="token imports punctuation" style="color:#393A34">,</span><span class="token imports"> </span><span class="token imports maybe-class-name">OnInit</span><span class="token imports punctuation" style="color:#393A34">,</span><span class="token imports"> </span><span class="token imports maybe-class-name">NgZone</span><span class="token imports"> </span><span class="token imports punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;@angular/core&quot;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@</span><span class="token function maybe-class-name" style="color:#d73a49">Component</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  changeDetection</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token maybe-class-name">ChangeDetectionStrategy</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access maybe-class-name">Default</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">export</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">class</span><span class="token plain"> </span><span class="token class-name maybe-class-name">ParentComponent</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">implements</span><span class="token plain"> </span><span class="token class-name maybe-class-name">OnInit</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> count</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">number</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">constructor</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">private</span><span class="token plain"> ngZone</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token maybe-class-name">NgZone</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#d73a49">ngOnInit</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// the interval is outside ngZone thus it will not</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// trigger change detection and ui will not update</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">ngZone</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">runOutsideAngular</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token function" style="color:#d73a49">interval</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">1000</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">subscribe</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">count</span><span class="token operator" style="color:#393A34">++</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// will not trigger cd for child</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>ä¸Šé¢å”¯ä¸€åŒºåˆ«å°±æ˜¯ç”¨æ¥ ngZone.runOutsideAngular è¿™ä¸ªæ–¹æ³•æŠŠ interval çš„åˆ›å»ºä¸¢åœ¨çš„ Angular çš„ Zone ä¹‹å¤–ã€‚è¿™æ · Angular å°±æ²¡æœ‰ patch è¿™ä¸ª intervalï¼Œä¹Ÿä¸ä¼šåœ¨ interval è§¦å‘çš„æ—¶å€™è°ƒç”¨ detectChange äº†ã€‚</p><p>æ³¨æ„è¿™é‡Œæ˜¯ç›´æ¥ä¸è°ƒç”¨ detectChangeã€‚æ‰€ä»¥å³ä½¿ OnPush çš„ç»„ä»¶è°ƒç”¨äº† markForCheck ä¹Ÿä¸ä¼šæ›´æ–° UIã€‚ç”šè‡³ ChangeDetectionStrategy.Default çš„ç»„ä»¶ä¹Ÿä¸ä¼šæœ‰ UI æ›´æ–°ã€‚å¿…é¡»ç­‰æœ‰å…¶ä»–äº‹ä»¶å‘ç”Ÿï¼Œè§¦å‘ detectChange åï¼ŒUI æ‰ä¼šåˆ·æ–°ã€‚</p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="async-pipe">Async Pipe<a aria-hidden="true" class="hash-link" href="#async-pipe" title="Direct link to heading">â€‹</a></h3><p>Angular é™¤äº†åœ¨@Input å€¼æ”¹å˜çš„æ—¶å€™ä¼šå†…éƒ¨å¸®æˆ‘ä»¬ markForCheckï¼Œè¿˜æœ‰ Asyc Pipe å‘å°„æ–°å€¼å¾—æ—¶å€™ä¼šå¸®æˆ‘ä»¬ markForCheckã€‚</p><h4 class="anchor anchorWithStickyNavbar_y2LR" id="markforcheck-on-next">markForCheck on next<a aria-hidden="true" class="hash-link" href="#markforcheck-on-next" title="Direct link to heading">â€‹</a></h4><p>v9.x çš„è¡¨ç°æ˜¯åªè¦ Observable æœ‰è§¦å‘äº† nextï¼Œ ç»‘å®šäº†è¿™ä¸ª Observable çš„ OnPush ç»„ä»¶å°±ä¼šè¢« markForCheckã€‚ä¸ä¼šæ£€æŸ¥å‘å‡ºçš„å€¼æ˜¯ä¸æ˜¯å’Œä»¥å‰çš„ä¸ä¸€æ ·ã€‚</p><p>ä¾‹å­ï¼š
child ç»„ä»¶ï¼š</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI html"><pre tabindex="0" class="prism-code language-html codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">p</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">count {{ (inObj$ | async)?.count }}</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">p</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI typescript"><pre tabindex="0" class="prism-code language-typescript codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">@</span><span class="token function maybe-class-name" style="color:#d73a49">Component</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  changeDetection</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token maybe-class-name">ChangeDetectionStrategy</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access maybe-class-name">OnPush</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">export</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">class</span><span class="token plain"> </span><span class="token class-name maybe-class-name">ChildComponent</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  @</span><span class="token function maybe-class-name" style="color:#d73a49">Input</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  inObj$</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token maybe-class-name">Observable</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> count</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">number</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>parent ç»„ä»¶ï¼š</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI html"><pre tabindex="0" class="prism-code language-html codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">app-child</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">[inObj$]</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">obj$</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">app-child</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI typescript"><pre tabindex="0" class="prism-code language-typescript codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">@</span><span class="token function maybe-class-name" style="color:#d73a49">Component</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  changeDetection</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token maybe-class-name">ChangeDetectionStrategy</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access maybe-class-name">Default</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">export</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">class</span><span class="token plain"> </span><span class="token class-name maybe-class-name">ParentComponent</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">implements</span><span class="token plain"> </span><span class="token class-name maybe-class-name">OnInit</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">private</span><span class="token plain"> obj </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> count</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">private</span><span class="token plain"> _obj$ </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name maybe-class-name">BehaviorSubject</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">obj</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> obj$ </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">_obj$</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">asObservable</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#d73a49">ngOnInit</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">interval</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">1000</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">subscribe</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">obj</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">count</span><span class="token operator" style="color:#393A34">++</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">_obj$</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">next</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">obj</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// Child component will update</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>è¿™é‡Œè¦æ³¨æ„çš„æ˜¯ï¼Œå³ä½¿ obj çš„å®ä¾‹ä¸å˜ï¼Œåªè¦è°ƒç”¨äº† async pipe çš„ next è¢«è°ƒç”¨äº†ï¼ŒAngular å°±ä¼šå¸®æˆ‘ä»¬è°ƒç”¨é‚£ä¸ª OnPush ç»„ä»¶çš„ markForCheckã€‚è¿™ä¸ªè¡¨ç°åœ¨ v10.0.0 é‡Œæœ‰æ”¹å˜ï¼Œä½†æ˜¯æˆ‘æ²¡æœ‰å»è‡ªå·±æµ‹ã€‚</p><h4 class="anchor anchorWithStickyNavbar_y2LR" id="ç›´æ¥æ”¹å˜åŸå¯¹è±¡çš„åµŒå¥—å€¼ä¸ä¼šè§¦å‘">ç›´æ¥æ”¹å˜åŸå¯¹è±¡çš„åµŒå¥—å€¼ä¸ä¼šè§¦å‘<a aria-hidden="true" class="hash-link" href="#ç›´æ¥æ”¹å˜åŸå¯¹è±¡çš„åµŒå¥—å€¼ä¸ä¼šè§¦å‘" title="Direct link to heading">â€‹</a></h4><p>è¿™é‡Œåªæ˜¯æä¸€ä¸‹ï¼Œv9.x çš„ async pipe åªæ˜¯ç›‘å¬ nextï¼Œæ‰€ä»¥ç›´æ¥æ”¹å˜å®ä¾‹é‡Œé¢çš„å€¼çš„è¯æ˜¯ä¸ä¼š markForCheck çš„</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI typescript"><pre tabindex="0" class="prism-code language-typescript codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// ...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">ngOnInit</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#d73a49">interval</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">1000</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">subscribe</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// will not trigger mark for check</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">obj</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">count</span><span class="token operator" style="color:#393A34">++</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// ...</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h3 class="anchor anchorWithStickyNavbar_y2LR" id="browser-äº‹ä»¶">Browser äº‹ä»¶<a aria-hidden="true" class="hash-link" href="#browser-äº‹ä»¶" title="Direct link to heading">â€‹</a></h3><p>å³ä½¿ä½ çš„ç»„ä»¶ç”¨äº† OnPushï¼Œå®ƒçš„ç›‘å¬çš„ Browser äº‹ä»¶ï¼ˆclickã€mouseoverã€mouseleave ç­‰ï¼‰è§¦å‘çš„æ—¶å€™ï¼ŒAngular éƒ½ä¼šå¸®ä½ è°ƒç”¨ markForCheckã€‚</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI html"><pre tabindex="0" class="prism-code language-html codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">span</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">count is: {{count}}</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">span</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">button</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">(click)</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">addOneClicked()</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">Increment</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">button</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI typescript"><pre tabindex="0" class="prism-code language-typescript codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">@</span><span class="token function maybe-class-name" style="color:#d73a49">Component</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  changeDetection</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token maybe-class-name">ChangeDetectionStrategy</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access maybe-class-name">OnPush</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">export</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">class</span><span class="token plain"> </span><span class="token class-name maybe-class-name">TestComponent</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> count</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">number</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">addOneClicked</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// does not need to call markForCheck if</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// invoked from click handler</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">count</span><span class="token operator" style="color:#393A34">++</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h2 class="anchor anchorWithStickyNavbar_y2LR" id="ngzone">NgZone<a aria-hidden="true" class="hash-link" href="#ngzone" title="Direct link to heading">â€‹</a></h2><p>æ¨èä¸€ç¯‡è¯¦ç»†è®² NgZone çš„<a href="https://medium.com/reverse-engineering-angular/angular-deep-dive-zone-js-how-does-it-monkey-patches-various-apis-9cc1c7fcc321" target="_blank" rel="noopener noreferrer">æ–‡ç« </a></p><p>Angular åœ¨ bootstrap çš„æ—¶å€™é¦–å…ˆåˆ›å»ºäº†ä¸€ä¸ªå« ngZone çš„ zoneã€‚ngZone çš„ä½œç”¨å°±æ˜¯ï¼Œåœ¨è¿™ä¸ª zone é‡Œè¿è¡Œçš„ä»£ç è¢« Angular monkey patch æ‰äº†ï¼ŒåŠ ä¸Šäº† Angular è‡ªå·±çš„åŒ…æ‹¬ changeDetection åœ¨å†…çš„ä¸€äº›å¤„ç†ã€‚å¼€å¤´è¯´çš„ Angular ç›‘å¬ timeoutã€intervalã€click ä¹‹ç±»çš„ä¸œè¥¿ï¼Œå°±æ˜¯é€šè¿‡ ngZone æ¥ç›‘å¬çš„ã€‚</p><p>Angular é€šè¿‡ ngZone æ¥ patch è¿™äº›æ–¹æ³•ï¼Œåè¿‡æ¥ä¹Ÿå°±æ˜¯è¯´ï¼Œå¦‚æœåœ¨ ngZone ä¹‹å¤–è°ƒç”¨ setIntervalã€addEventListener ä¹‹ç±»çš„ä¸œè¥¿çš„è¯ï¼Œç”¨çš„æ–¹æ³•å°±ä¸æ˜¯ Angular patch è¿‡çš„ç‰ˆæœ¬ï¼Œä¹Ÿå°±ä¸ä¼šè§¦å‘ detectChange äº†ã€‚</p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="ui-åˆ·æ–°ä¸åŠæ—¶">UI åˆ·æ–°ä¸åŠæ—¶<a aria-hidden="true" class="hash-link" href="#ui-åˆ·æ–°ä¸åŠæ—¶" title="Direct link to heading">â€‹</a></h3><p>ä¸Šé¢æåˆ°  ä¸åœ¨ NgZone é‡Œåˆ›å»º setInterval ä¹‹ç±»çš„ä¸œè¥¿ï¼ŒAngular å°±ä¸ä¼šå¸®æˆ‘ä»¬è‡ªåŠ¨è§¦å‘ detectChangeã€‚æˆ‘ä»¬ UI æ›´æ–°ä¸åŠæ—¶çš„é—®é¢˜åŸºæœ¬éƒ½æ˜¯è¿™ä¸ªé€ æˆçš„ã€‚ä¸‹é¢åˆ—ä¸€äº›å¸¸è§çš„åœ¨ ngZone ä¹‹å¤–è¿è¡Œçš„åŸå› ã€‚</p><h4 class="anchor anchorWithStickyNavbar_y2LR" id="å…¶ä»–ç¬¬ä¸‰æ–¹-npm-åº“">å…¶ä»–ç¬¬ä¸‰æ–¹ npm åº“<a aria-hidden="true" class="hash-link" href="#å…¶ä»–ç¬¬ä¸‰æ–¹-npm-åº“" title="Direct link to heading">â€‹</a></h4><p>Angular å¯¹ç¬¬ä¸‰æ–¹åº“æ˜¯æ— æ„ŸçŸ¥çš„ï¼Œæ‰€ä»¥å¦‚æœç¬¬ä¸‰æ–¹åº“åº•å±‚ç”¨äº† C++ å›è°ƒçš„è¯ï¼Œæˆ‘ä»¬å°±æœ‰å¯èƒ½åœ¨ä¸çŸ¥æƒ…çš„æƒ…å†µä¸‹è·‘å‡º NgZone äº†ã€‚éœ€è¦æ³¨æ„ã€‚ä½†æ˜¯ Promise çš„äº‹æƒ…åœ¨è¿™é‡Œä¹Ÿé€‚ç”¨ï¼Œå¦‚æœç¬¬ä¸‰æ–¹åº“æ˜¯ç”¨ Promise çš„è¯ï¼Œåæœ‰å…«ä¹æ˜¯æ²¡é—®é¢˜çš„ã€‚å› ä¸º Angular æŠŠ Promise ç»™ patch äº†ã€‚</p><h4 class="anchor anchorWithStickyNavbar_y2LR" id="ngzone-ä¹‹å¤–åˆ›å»ºçš„ç»„ä»¶">NgZone ä¹‹å¤–åˆ›å»ºçš„ç»„ä»¶<a aria-hidden="true" class="hash-link" href="#ngzone-ä¹‹å¤–åˆ›å»ºçš„ç»„ä»¶" title="Direct link to heading">â€‹</a></h4><p>è¿™ä¸ªæ˜¯æ¯”è¾ƒéšæ™¦çš„ä¸€ä¸ªæƒ…å†µã€‚ä¸Šé¢è®² OnPush çš„æ—¶å€™åšçš„ä¸€å¤§ä¸ªå‡è®¾æ˜¯ click ç­‰æµè§ˆå™¨äº‹ä»¶å‘ç”Ÿçš„æ—¶å€™ Angular ä¼šè‡ªåŠ¨è°ƒç”¨ detectChange æ¥åˆ·æ–° UIã€‚ä½†æ˜¯è¿™ä¸ªæ˜¯åœ¨ç»„ä»¶åœ¨ NgZone é‡Œåˆ›å»ºçš„å‰æä¸‹æ‰æˆç«‹çš„ã€‚</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI html"><pre tabindex="0" class="prism-code language-html codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">button</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">(click)</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">onClick()</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">button</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>ä¸Šé¢çš„è¿™ç§ templateï¼Œåœ¨åˆ›å»ºè¿™ä¸ª button çš„æ—¶å€™ï¼ŒAngular ä¼šè°ƒç”¨ addEventListener æ¥å¸®æˆ‘ä»¬æŠŠè¯¥åšçš„äº‹æƒ…æå®šã€‚ç„¶åå†å›é¡¾ä¸€ä¸‹ä¹‹å‰ä¹‹å‰è®²çš„ï¼ŒAngular æ˜¯é€šè¿‡ NgZoneï¼ŒæŠŠ addEventListener ç­‰æ–¹æ³• patch äº†ï¼Œæ‰è¾¾åˆ°è‡ªåŠ¨ detectChange çš„æ•ˆæœçš„ã€‚é‚£ä¹ˆå¦‚æœè¿™ä¸ª button æ˜¯åœ¨ ngZone ä¹‹å¤–åˆ›å»ºçš„ï¼Œé‚£è°ƒç”¨çš„ addEventListener å°±æ˜¯æ²¡æœ‰è¢« patch è¿‡çš„ç‰ˆæœ¬ï¼Œç‚¹å‡»åä¹Ÿå°±ä¸ä¼šä¸»åŠ¨è§¦å‘ detectChangeã€‚ï¼ˆè‡ªåŠ¨çš„ markForCheck è¿˜ä¼šè¿›è¡Œï¼Œè¿™ä¸ªåŠŸèƒ½æ˜¯ Angular è§£æ template çš„ä¸€éƒ¨åˆ†ï¼Œä¸æ˜¯ patch å‡ºæ¥çš„ï¼‰</p><p>è¦æ€ä¹ˆåœ¨ ngZone ä¹‹å¤–åˆ›å»ºç»„ä»¶ï¼Ÿ<code>*ngIf</code>ã€<code>*ngFor</code> ç­‰ directive é…åˆåœ¨ zone ä¹‹å¤–æ‰‹åŠ¨è°ƒç”¨ detectChange å°±ä¼šå‘ç”Ÿã€‚</p><p>ä¾‹å­ï¼š</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI html"><pre tabindex="0" class="prism-code language-html codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">p</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">count is: {{count}}</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">p</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">div</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">*ngIf</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">enable</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">button</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">(click)</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">onCreatedButtnClick()</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Created</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">button</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">div</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI typescript"><pre tabindex="0" class="prism-code language-typescript codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">@</span><span class="token function maybe-class-name" style="color:#d73a49">Component</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  changeDetection</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token maybe-class-name">ChangeDetectionStrategy</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access maybe-class-name">OnPush</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">export</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">class</span><span class="token plain"> </span><span class="token class-name maybe-class-name">ParentComponent</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">implements</span><span class="token plain"> </span><span class="token class-name maybe-class-name">OnInit</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> count</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">number</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> enable</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">boolean</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">false</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">constructor</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">private</span><span class="token plain"> ngZone</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token maybe-class-name">NgZone</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">private</span><span class="token plain"> cd</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token maybe-class-name">ChangeDetectorRef</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#d73a49">ngOnInit</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">ngZone</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">runOutsideAngular</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token function" style="color:#d73a49">interval</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">1000</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">subscribe</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">enable</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">// we are outside ngZone, so we have to manually</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">// call detectChanges so angular can create button</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">cd</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">detectChanges</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#d73a49">onCreatedButtnClick</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// UI will not update until detectChange is triggered</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// by network or some other component. This is because</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// the button was created outside of angular zone and</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// will not automatically call detectChanges on click</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">count</span><span class="token operator" style="color:#393A34">++</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">cd</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">markForCheck</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h3 class="anchor anchorWithStickyNavbar_y2LR" id="runoutsideangular-æ€§èƒ½ä¼˜åŒ–">runOutsideAngular æ€§èƒ½ä¼˜åŒ–<a aria-hidden="true" class="hash-link" href="#runoutsideangular-æ€§èƒ½ä¼˜åŒ–" title="Direct link to heading">â€‹</a></h3><p>æ€§èƒ½å·®ï¼š</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI html"><pre tabindex="0" class="prism-code language-html codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">span</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">time is: {{time}}</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">span</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI typescript"><pre tabindex="0" class="prism-code language-typescript codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> time</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">number</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">constructor</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">private</span><span class="token plain"> ngZone</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token maybe-class-name">NgZone</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">private</span><span class="token plain"> cd</span><span class="token operator" style="color:#393A34">:</span><span class="token maybe-class-name">ChangeDetectorRef</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">ngOnInit</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#d73a49">interval</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">100</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">subscribe</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">_ </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">time</span><span class="token operator" style="color:#393A34">++</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">cd</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">markForCheck</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// é€šå¸¸æƒ…å†µä¸‹ä¸éœ€è¦ï¼Œåœ¨OnPushç­–ç•¥ä¸‹éœ€è¦åŠ </span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>ä¸Šé¢è¿™ç§å†™æ³•ï¼Œæ ¹æ®æƒ…å†µï¼Œå¯èƒ½ä¼šæœ‰å¾ˆç³Ÿç³•çš„æ€§èƒ½ã€‚åŸå› æ˜¯ ngZone æŠŠ setInterval ç»™ patch äº†ã€‚æ‰€ä»¥ setInterval çš„æ¯æ¬¡å›è°ƒåï¼Œéƒ½ä¼šè§¦å‘æºäº root node çš„ detectChangeã€‚ä¼šæŠŠæ•´ä¸ªåº”ç”¨éƒ½æ£€æŸ¥ä¸€æ¬¡ã€‚</p><p>è™½ç„¶ OnPush çš„ç»„ä»¶ä¼šè¢«è·³è¿‡ï¼Œä½†æ˜¯ markForCheck ä¼šæŠŠè‡ªå·±æ‰€æœ‰çˆ¶äº²ç»„ä»¶éƒ½ç»™æ ‡è®°ä¸º dirtyã€‚å¦‚æœè‡ªå·±çš„çˆ¶ç»„ä»¶é‡Œæœ‰å¾ˆå¤šæ•°æ®ç»‘å®šçš„è¯ï¼Œä¹Ÿä¼šæœ‰æ€§èƒ½é—®é¢˜ã€‚æ›´ä½•å†µæˆ‘ä»¬ä»£ç é‡Œè¿˜æœ‰ä¸å°‘ç»„ä»¶è¿˜æ˜¯ Default çš„ cd ç­–ç•¥...</p><p>æ€§èƒ½ä¼˜åŒ–ï¼š</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI typescript"><pre tabindex="0" class="prism-code language-typescript codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> time</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">number</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">constructor</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">private</span><span class="token plain"> ngZone</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token maybe-class-name">NgZone</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">private</span><span class="token plain"> cd</span><span class="token operator" style="color:#393A34">:</span><span class="token maybe-class-name">ChangeDetectorRef</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">ngOnInit</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">ngZone</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">runOutsideAngular</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">interval</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">100</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">subscribe</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">_ </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">time</span><span class="token operator" style="color:#393A34">++</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">cd</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">detectChanges</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>åƒè¿™æ ·åœ¨ ngZone ä¹‹å¤–åˆ›å»º interval çš„è¯ï¼Œç”¨çš„å°±ä¸æ˜¯ Angular æ‰“è¿‡çŒ´å­è¡¥ä¸çš„ç‰ˆæœ¬äº†ã€‚æ‰€ä»¥è§¦å‘çš„æ—¶å€™ä¸ä¼šå¯¹æ•´ä¸ªåº”ç”¨è¿›è¡Œ cdã€‚</p><p>å› ä¸ºæ²¡æœ‰ angular çš„ cdï¼Œæˆ‘ä»¬å¿…é¡»è‡ªå·±æ‰‹åŠ¨è°ƒç”¨ä¸€ä¸‹ detectChanges()ã€‚è¿™ä¸ªæ–¹æ³•åªä½œç”¨äºå½“å‰ node ä»¥åŠå…¶å­ç»„ä»¶ã€‚æ‰€ä»¥åƒä¸€ä¸ªç®€å•çš„ timer è¿™æ ·å¯ä»¥ç¡®å®šä¸ä¼šå½±å“åº”ç”¨å…¶ä»–éƒ¨åˆ†çŠ¶æ€çš„ç»„ä»¶ï¼Œå¯ä»¥æ”¾å¿ƒåœ°åªå¯¹å®ƒè¿›è¡Œ cdã€‚</p><p>å½“ç„¶è¿™ä¸ªçš„å‰ææ˜¯ä¸å½±å“åº”ç”¨å…¶ä»–åœ°æ–¹ã€‚å¦‚æœè¦å±•ç¤ºæ—¶é—´ï¼Œä½†æ˜¯æ¯ 10s dispatch ä¸€ä¸ª action çš„è¯ï¼Œåº”è¯¥æŠŠè¿™ä¸ª action ä¸¢å› AngularZone é‡Œé¢æ¥ dispatchï¼Œä»¥è§¦å‘ä¸€æ¬¡å…¨å±€çš„ cdã€‚</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI typescript"><pre tabindex="0" class="prism-code language-typescript codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">ngOnInit</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">ngZone</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">runOutsideAngular</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">interval</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">100</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">subscribe</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">_ </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">time</span><span class="token operator" style="color:#393A34">++</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">cd</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">detectChanges</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">time</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">%</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">100</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">===</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">// NgZone.runä¼šè§¦å‘ä¸€æ¬¡æºäºroot nodeçš„detectChange</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">ngZone</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">run</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">store</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">dispatch</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name maybe-class-name">Action</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p><strong>å¦‚æœ ngZone å¤–è§¦å‘çš„ detectChange è§¦å‘äº†<!-- -->*<!-- -->ngIf ä¹‹ç±»çš„ directive åˆ›å»ºæ–°å…ƒç´ çš„è¯ï¼Œåˆ›å»ºçš„ç»„ä»¶çš„ click ç­‰ handler éƒ½ä¼šåœ¨ ngZone ä¹‹å¤–æ‰§è¡Œï¼Œå¹¶ä¸”ä¸ä¼šè§¦å‘ detectChangeã€‚æ‰€ä»¥è¦æ³¨æ„</strong></p><h2 class="anchor anchorWithStickyNavbar_y2LR" id="changedetectorrefdetach-çš„éªšæ“ä½œ">ChangeDetectorRef.detach çš„éªšæ“ä½œ<a aria-hidden="true" class="hash-link" href="#changedetectorrefdetach-çš„éªšæ“ä½œ" title="Direct link to heading">â€‹</a></h2><h2 class="anchor anchorWithStickyNavbar_y2LR" id="qa">Q&amp;A<a aria-hidden="true" class="hash-link" href="#qa" title="Direct link to heading">â€‹</a></h2><ul><li>detectChange å’Œ markForCheck çš„åŒºåˆ«ï¼Ÿ</li></ul><p>markForCheck åªæ˜¯æ ‡è®° dirtyï¼Œè‡ªèº«å…¶å®åªæ˜¯æŠŠä¸€ä¸ªå€¼è®¾ç½®ä¸º trueã€‚å®é™…è¿›è¡Œæ•°æ®å¯¹æ¯”ã€UI æ›´æ–°ã€å…ƒç´ åˆ›å»ºçš„æ˜¯ detectChangeã€‚</p><ul><li>ä¸šåŠ¡ç»„ä»¶æœ€ä½³å®è·µï¼ŸonPush + markForCheck/detectChange ç»„åˆï¼Ÿ</li></ul><p>æœ€å¥½æ˜¯å°½å¯èƒ½å¤šçš„ç»„ä»¶ä½¿ç”¨ onPush + markForCheckã€‚detectChange æ˜¯åœ¨ç»å¤§å¤šæ•°æƒ…å†µä¸‹æ˜¯ä¸éœ€è¦çš„ã€‚detectChange çš„ä¸€ç§åˆç†çš„ä½¿ç”¨åœºæ™¯æ˜¯ä¸Šé¢æåˆ°çš„ runOutsideAngular çš„æ€§èƒ½ä¼˜åŒ–ã€‚ç›¸å¯¹ç‹¬ç«‹çš„ç»„ä»¶ä½†æ˜¯éœ€è¦é¢‘ç¹æ›´æ–°ã€‚</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-tags-row row margin-bottom--sm"><div class="col"><b>Tags:</b><ul class="tags_NBRY padding--none margin-left--sm"><li class="tag_F03v"><a class="tag_WK-t tagRegular_LXbV" href="/Blog/docs/tags/angular">angular</a></li></ul></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/Blog/docs/æ—¥å¸¸ç§¯ç´¯/åŒ…ç®¡ç†å·¥å…·/yarn/about-yarn"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Â« <!-- -->å…³äº yarn ä½ éœ€è¦çŸ¥é“çš„</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/Blog/docs/æ¡†æ¶&amp;å¸¸ç”¨åº“/Angular/angular-form-contol-disabled"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">formControlçš„disabledå±æ€§ç»‘å®šä¸ç”Ÿæ•ˆ<!-- --> Â»</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_vrFS thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#changedetection-æ˜¯ä»€ä¹ˆ" class="table-of-contents__link toc-highlight">ChangeDetection æ˜¯ä»€ä¹ˆ</a></li><li><a href="#changedetectionstrategydefault" class="table-of-contents__link toc-highlight">ChangeDetectionStrategy.Default</a></li><li><a href="#detectchange-å®ç°" class="table-of-contents__link toc-highlight">detectChange å®ç°</a></li><li><a href="#detectchange-æ—¶æœº" class="table-of-contents__link toc-highlight">detectChange æ—¶æœº</a></li><li><a href="#detectionstrategyonpush" class="table-of-contents__link toc-highlight">DetectionStrategy.OnPush</a><ul><li><a href="#onpush-ä¸»è¦åŸåˆ™" class="table-of-contents__link toc-highlight">OnPush ä¸»è¦åŸåˆ™</a></li><li><a href="#input-å±æ€§å‘ç”Ÿæ”¹å˜çš„æ—¶å€™" class="table-of-contents__link toc-highlight">@Input å±æ€§å‘ç”Ÿæ”¹å˜çš„æ—¶å€™</a></li><li><a href="#async-pipe" class="table-of-contents__link toc-highlight">Async Pipe</a></li><li><a href="#browser-äº‹ä»¶" class="table-of-contents__link toc-highlight">Browser äº‹ä»¶</a></li></ul></li><li><a href="#ngzone" class="table-of-contents__link toc-highlight">NgZone</a><ul><li><a href="#ui-åˆ·æ–°ä¸åŠæ—¶" class="table-of-contents__link toc-highlight">UI åˆ·æ–°ä¸åŠæ—¶</a></li><li><a href="#runoutsideangular-æ€§èƒ½ä¼˜åŒ–" class="table-of-contents__link toc-highlight">runOutsideAngular æ€§èƒ½ä¼˜åŒ–</a></li></ul></li><li><a href="#changedetectorrefdetach-çš„éªšæ“ä½œ" class="table-of-contents__link toc-highlight">ChangeDetectorRef.detach çš„éªšæ“ä½œ</a></li><li><a href="#qa" class="table-of-contents__link toc-highlight">Q&amp;A</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2021 My Project, Inc. Built with GuoXiaxing.</div></div></div></footer></div>
<script src="/Blog/assets/js/runtime~main.1db7cb56.js"></script>
<script src="/Blog/assets/js/main.c97de10f.js"></script>
</body>
</html>